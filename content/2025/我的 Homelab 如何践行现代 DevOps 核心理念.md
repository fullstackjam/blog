+++
title = "我的 Homelab 如何践行现代 DevOps 核心理念"
date = 2025-09-25

[extra.comments]
issue_id = 10
+++

三年前折腾 [k8s-gitops](https://github.com/fullstackjam/k8s-gitops) 的时候，我只是想搭个能跑的 K8s 环境玩玩。没想到这一路折腾下来，竟然把企业级的 DevOps 实践都给搞全了。

从几台破服务器开始，到现在这套生产级的集群，踩过的坑、加过的班、熬过的夜，都变成了这个项目的一部分。回头看看，发现自己不知不觉就把 DevOps 的精髓给摸透了。

<!--more-->

---

## 为什么要折腾 Homelab？

说实话，一开始就是纯粹的技术好奇心在作怪。

公司里用的那套 K8s 环境，我只能看不能摸，想试点新功能都要排期。云服务虽然方便，但费用高不说，还有各种限制。想要真正理解这些技术的本质，还得自己动手搭一套。

最关键的是，我发现了一个残酷的现实：

**看再多文档，不如自己踩一遍坑。**

刚开始的时候，我连 Pod 和 Service 的区别都搞不清楚。网上教程看了一堆，到实际操作的时候还是一头雾水。但是当你自己从零开始搭建，每一个配置文件都要自己写，每一个网络问题都要自己解决的时候，这些概念就慢慢清晰起来了。

## 三年踩坑之路：从"能跑就行"到"企业级"

### 第一步：告别"雪花服务器"

最开始的时候，我的每台机器都是手工配置的。这台装了 Docker，那台装了 K8s，配置文件散落各处，版本也不统一。一旦出了问题，基本就是重装系统的节奏。

后来实在受不了了，开始用 Ansible 来管理。从操作系统安装到软件配置，全部写成脚本。现在想重建整个集群，一行命令搞定，5分钟内集群重新上线。

**最大的收获**：当基础设施变成代码以后，你就不再怕"搞坏"环境了。因为随时可以重来。

### 第二步：GitOps 救了我的命

手动部署真的是噩梦。每次更新应用都要 SSH 到服务器上，手工执行一堆命令。经常搞忘了某个步骤，导致服务挂掉。更可怕的是，完全不知道线上跑的是哪个版本的代码。

引入 ArgoCD 之后，世界瞬间清净了。现在部署就是 Git push 一下，剩下的全自动。想回滚？再 push 一下就行。每次部署都有完整的记录，再也不用担心"昨天到底改了什么"这种问题。

**最深的体会**：当部署变成 Git 操作时，运维工作的压力瞬间减少了一大半。

### 第三步：可观测性让我睡得安稳

以前系统出问题，基本靠蒙。CPU 高了？不知道。内存不够了？也不知道。直到用户投诉了才发现服务挂了。

搭建了 Prometheus + Grafana 监控体系之后，整个系统变得"透明"了。哪个服务消耗资源多，哪台机器负载高，一眼就能看出来。更重要的是，可以在问题发生前就发现异常。

**最实用的经验**：好的监控不是为了炫技，而是为了让你晚上能安心睡觉。

## 一些实用的建议

如果你也想搞个 homelab，我的经验是：

**别一开始就搞得太复杂**。我最初就犯了这个错误，想一口气把所有高大上的技术都用上，结果搞得乱七八糟。还是得一步一步来，先把基础打牢。

**选择一个具体的项目深入下去**。不要今天学 Docker，明天学 K8s，后天又去搞 Terraform。选定一个方向，死磕到底。

**记录你踩过的每一个坑**。我现在还经常翻自己以前的笔记，很多问题的解决方案都在里面。

**别害怕搞坏东西**。反正是自己的环境，坏了就重来。我这三年里重装系统不下二十次，每次都有新的收获。

## 三年下来的一些感悟

说实话，这个项目最大的价值不是那些酷炫的技术，而是让我真正理解了什么是 DevOps。

以前我觉得 DevOps 就是一堆工具的组合，学会了 Docker、K8s、CI/CD 就算掌握了。但实际搞下来才发现，DevOps 更像是一种思维方式：

- 能自动化的绝不手工操作
- 能监控的绝不盲目运行
- 能版本化的绝不口头传递
- 能重复的绝不依赖个人

这些理念一旦内化了，看待技术问题的角度就完全不一样了。

### 对职业发展的影响

更实际的是，这个项目确实帮了我的职业发展大忙。

面试的时候，当别人还在背概念的时候，我可以很自然地聊起实际遇到的问题和解决方案。什么网络策略、存储卷、资源限制，这些都不再是抽象的概念，而是真实踩过的坑。

现在工作中遇到类似的问题，基本都能快速定位和解决。因为在 homelab 里都遇到过类似的场景。

### 一点小建议

如果你也想搞个类似的项目：

**别追求完美，先跑起来再说**。我见过太多人纠结于架构设计，结果一直停留在纸面上。

**重视文档，未来的自己会感谢你**。我现在还经常翻自己半年前写的部署笔记。

**加入社区，一个人走得快，一群人走得远**。K8s 社区里有很多大神，多交流能少走不少弯路。

### 项目的真正价值

[k8s-gitops](https://github.com/fullstackjam/k8s-gitops) 这个项目证明了一件事：个人项目也可以有企业级的品质。关键不在于规模，而在于理念和实践。

通过 Infrastructure as Code、GitOps、可观测性这些现代实践，我们完全可以构建出稳定、可靠、易维护的系统。而且这个过程中学到的东西，直接就能用到工作中。

---

**项目地址**：[https://github.com/fullstackjam/k8s-gitops](https://github.com/fullstackjam/k8s-gitops)

**文档地址**：[https://k8s-gitops.fullstackjam.com](https://k8s-gitops.fullstackjam.com)

有问题欢迎来 GitHub 上讨论，也欢迎 Star 支持一下 😄
