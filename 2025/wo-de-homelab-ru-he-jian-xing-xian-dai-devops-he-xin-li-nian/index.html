<!doctype html><html lang=en><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=#000000 id=color_chrome name=theme-color><meta content=#000000 id=color_safari name=apple-mobile-web-app-status-bar-style><meta content="Jam's Blog" name=description><link rel="Shortcut Icon" href=https://blog.fullstackjam.com/favicon.svg><link href=https://blog.fullstackjam.com/favicon.svg rel=Bootmark><link title="Jam's Blog" href=https://blog.fullstackjam.com/rss.xml rel=alternate type=application/rss+xml><style>#title,body{line-height:1.6em}body{background:#000;color:#00c000;font-size:1.2em}#container{margin:2.4em auto;width:72%}#header{text-align:center}#header>a{font-size:.96em;margin:auto 1em}#title{font-size:1.6em;font-weight:700;margin:1em auto}#date{font-style:italic}#list>li{margin:.8em auto;list-style:disc}img{max-width:100%}a{color:inherit;text-decoration:none}#content a,a:hover{text-decoration:underline}pre{padding:1em;overflow:auto;background:#1b1d16}:not(pre) >code{padding:.2em;background:#1b1d16;overflow:auto}blockquote{padding:0 1em;margin:0;border-left:.25em solid #212121}.mermaid{text-align:center;margin:2em auto;display:block}@media (max-width:600px){#container{width:88%}#header>a{margin:auto .3em}}</style><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>mermaid.initialize({startOnLoad:true,theme:'dark'})</script><title>我的 Homelab 如何践行现代 DevOps 核心理念 - Jam's Blog</title><body><div id=header><a href=https://blog.fullstackjam.com>Jam's Blog</a><a href=https://blog.fullstackjam.com/about/>About</a><a href=https://blog.fullstackjam.com/friends/>Friends</a><a href=https://blog.fullstackjam.com/projects/>Projects</a></div><div id=container><a href=https://blog.fullstackjam.com/2025/wo-de-homelab-ru-he-jian-xing-xian-dai-devops-he-xin-li-nian/ id=title>我的 Homelab 如何践行现代 DevOps 核心理念</a><div id=date>2025-09-25</div><div id=content><p>三年前折腾 <a href=https://github.com/fullstackjam/k8s-gitops>k8s-gitops</a> 的时候，我只是想搭个能跑的 K8s 环境玩玩。没想到这一路折腾下来，竟然把企业级的 DevOps 实践都给搞全了。<p>从几台破服务器开始，到现在这套生产级的集群，踩过的坑、加过的班、熬过的夜，都变成了这个项目的一部分。回头看看，发现自己不知不觉就把 DevOps 的精髓给摸透了。<hr><h2 id=wei-shi-yao-yao-zhe-teng-homelab>为什么要折腾 Homelab？</h2><p>说实话，一开始就是纯粹的技术好奇心在作怪。<p>公司里用的那套 K8s 环境，我只能看不能摸，想试点新功能都要排期。云服务虽然方便，但费用高不说，还有各种限制。想要真正理解这些技术的本质，还得自己动手搭一套。<p>最关键的是，我发现了一个残酷的现实：<p><strong>看再多文档，不如自己踩一遍坑。</strong><p>刚开始的时候，我连 Pod 和 Service 的区别都搞不清楚。网上教程看了一堆，到实际操作的时候还是一头雾水。但是当你自己从零开始搭建，每一个配置文件都要自己写，每一个网络问题都要自己解决的时候，这些概念就慢慢清晰起来了。<h2 id=san-nian-cai-keng-zhi-lu-cong-neng-pao-jiu-xing-dao-qi-ye-ji>三年踩坑之路：从"能跑就行"到"企业级"</h2><h3 id=di-yi-bu-gao-bie-xue-hua-fu-wu-qi>第一步：告别"雪花服务器"</h3><p>最开始的时候，我的每台机器都是手工配置的。这台装了 Docker，那台装了 K8s，配置文件散落各处，版本也不统一。一旦出了问题，基本就是重装系统的节奏。<p>后来实在受不了了，开始用 Ansible 来管理。从操作系统安装到软件配置，全部写成脚本。现在想重建整个集群，一行命令搞定，5分钟内集群重新上线。<p><strong>最大的收获</strong>：当基础设施变成代码以后，你就不再怕"搞坏"环境了。因为随时可以重来。<h3 id=di-er-bu-gitops-jiu-liao-wo-de-ming>第二步：GitOps 救了我的命</h3><p>手动部署真的是噩梦。每次更新应用都要 SSH 到服务器上，手工执行一堆命令。经常搞忘了某个步骤，导致服务挂掉。更可怕的是，完全不知道线上跑的是哪个版本的代码。<p>引入 ArgoCD 之后，世界瞬间清净了。现在部署就是 Git push 一下，剩下的全自动。想回滚？再 push 一下就行。每次部署都有完整的记录，再也不用担心"昨天到底改了什么"这种问题。<p><strong>最深的体会</strong>：当部署变成 Git 操作时，运维工作的压力瞬间减少了一大半。<h3 id=di-san-bu-ke-guan-ce-xing-rang-wo-shui-de-an-wen>第三步：可观测性让我睡得安稳</h3><p>以前系统出问题，基本靠蒙。CPU 高了？不知道。内存不够了？也不知道。直到用户投诉了才发现服务挂了。<p>搭建了 Prometheus + Grafana 监控体系之后，整个系统变得"透明"了。哪个服务消耗资源多，哪台机器负载高，一眼就能看出来。更重要的是，可以在问题发生前就发现异常。<p><strong>最实用的经验</strong>：好的监控不是为了炫技，而是为了让你晚上能安心睡觉。<h2 id=yi-xie-shi-yong-de-jian-yi>一些实用的建议</h2><p>如果你也想搞个 homelab，我的经验是：<p><strong>别一开始就搞得太复杂</strong>。我最初就犯了这个错误，想一口气把所有高大上的技术都用上，结果搞得乱七八糟。还是得一步一步来，先把基础打牢。<p><strong>选择一个具体的项目深入下去</strong>。不要今天学 Docker，明天学 K8s，后天又去搞 Terraform。选定一个方向，死磕到底。<p><strong>记录你踩过的每一个坑</strong>。我现在还经常翻自己以前的笔记，很多问题的解决方案都在里面。<p><strong>别害怕搞坏东西</strong>。反正是自己的环境，坏了就重来。我这三年里重装系统不下二十次，每次都有新的收获。<h2 id=san-nian-xia-lai-de-yi-xie-gan-wu>三年下来的一些感悟</h2><p>说实话，这个项目最大的价值不是那些酷炫的技术，而是让我真正理解了什么是 DevOps。<p>以前我觉得 DevOps 就是一堆工具的组合，学会了 Docker、K8s、CI/CD 就算掌握了。但实际搞下来才发现，DevOps 更像是一种思维方式：<ul><li>能自动化的绝不手工操作<li>能监控的绝不盲目运行<li>能版本化的绝不口头传递<li>能重复的绝不依赖个人</ul><p>这些理念一旦内化了，看待技术问题的角度就完全不一样了。<h3 id=dui-zhi-ye-fa-zhan-de-ying-xiang>对职业发展的影响</h3><p>更实际的是，这个项目确实帮了我的职业发展大忙。<p>面试的时候，当别人还在背概念的时候，我可以很自然地聊起实际遇到的问题和解决方案。什么网络策略、存储卷、资源限制，这些都不再是抽象的概念，而是真实踩过的坑。<p>现在工作中遇到类似的问题，基本都能快速定位和解决。因为在 homelab 里都遇到过类似的场景。<h3 id=yi-dian-xiao-jian-yi>一点小建议</h3><p>如果你也想搞个类似的项目：<p><strong>别追求完美，先跑起来再说</strong>。我见过太多人纠结于架构设计，结果一直停留在纸面上。<p><strong>重视文档，未来的自己会感谢你</strong>。我现在还经常翻自己半年前写的部署笔记。<p><strong>加入社区，一个人走得快，一群人走得远</strong>。K8s 社区里有很多大神，多交流能少走不少弯路。<h3 id=xiang-mu-de-zhen-zheng-jie-zhi>项目的真正价值</h3><p><a href=https://github.com/fullstackjam/k8s-gitops>k8s-gitops</a> 这个项目证明了一件事：个人项目也可以有企业级的品质。关键不在于规模，而在于理念和实践。<p>通过 Infrastructure as Code、GitOps、可观测性这些现代实践，我们完全可以构建出稳定、可靠、易维护的系统。而且这个过程中学到的东西，直接就能用到工作中。<hr><p><strong>项目地址</strong>：<a href=https://github.com/fullstackjam/k8s-gitops>https://github.com/fullstackjam/k8s-gitops</a><p><strong>文档地址</strong>：<a href=https://k8s-gitops.fullstackjam.com>https://k8s-gitops.fullstackjam.com</a><p>有问题欢迎来 GitHub 上讨论，也欢迎 Star 支持一下 😄</div><div id=comments-issue-id style=display:none>10</div><style>#comment-header,#comment-list>li{margin:1em auto}#comment-avatar,#comment-tip{margin:auto .2em}#comment-action-avatar,#comment-avatar{width:1em;height:1em}#comment-action-info>*,#comment-action-input>*,#comment-info>*{display:inline-block;vertical-align:middle}#comment-header{font-size:1.6em;font-weight:700;line-height:1.6em}#comment-tip{font-style:italic}#comment-list{list-style:none;padding:0}#comment-action-author,#comment-author{font-weight:700;margin:auto .4em}#comment-datetime{font-size:.8em;font-style:italic}#comment-body{margin:auto 1.8em}#comment-action-info>*{margin:1em .2em}#comment-action-input{height:2em;width:100%;margin:1em auto}#comment-action-input>*{height:100%;margin:0 .2em}#comment-action-textarea{width:calc(100% - 8em)}#comment-action-post{width:6em}#comment-action-login{margin:1em .3em}</style><ol id=comment-list></ol><div id=comment-action></div><script>const y=e=>{var t=/\\([\\\|`*_{}\[\]()#+\-~])/g,n=/\n *&gt; *([^]*?)(?=(\n|$){2})/g,i=/\n( *)(?:[*\-+]|((\d+)|([a-z])|[A-Z])[.)]) +([^]*?)(?=(\n|$){2})/g,o=/(^|[^A-Za-z\d\\])(([*_])|(~)|(\^)|(--)|(\+\+)|`)(\2?)([^<]*?)\2\8(?!\2)(?=\W|_|$)/g,a=/^.*\n( *\|( *:?-+:?-+:? *\|)* *\n|)/,c=/.*\n/g,m=/\||(.*?[^\\])\|/g;const l=(t,n)=>{e=e.replace(t,n)},d=(e,t)=>"<"+e+">"+t+"</"+e+">",r=e=>e.replace(n,((e,t)=>d("blockquote",r(u(t.replace(/^ *&gt; */gm,"")))))),s=e=>e.replace(i,((e,t,n,i,o,a)=>(e=d("li",u(a.split(RegExp("\n ?"+t+"(?:(?:\\d+|[a-zA-Z])[.)]|[*\\-+]) +","g")).map(s).join("</li><li>"))),"\n"+(n?'<ol start="'+(i?n+'">':parseInt(n,36)-9+'" style="list-style-type:'+(o?"low":"upp")+'er-alpha">')+e+"</ol>":d("ul",e))))),u=e=>e.replace(o,((e,t,n,i,o,a,c,m,l,r)=>t+d(i?l?"strong":"em":o?l?"s":"sub":a?"sup":c?"small":m?"big":"code",u(r))));var p=[],h=0;return e="\n"+e+"\n",l(/</g,"&lt;"),l(/>/g,"&gt;"),l(/\t|\r|\uf8ff/g,"  "),e=r(e),l(/^([*\-=_] *){3,}$/gm,"<hr/>"),e=s(e),l(/<\/(ol|ul)>\n\n<\1>/g,""),l(/\n((```|~~~).*\n?([^]*?)\n?\2|((    .*?\n)+))/g,((e,t,n,i,o)=>(p[--h]=d("pre",d("code",i||o.replace(/^    /gm,""))),h+""))),l(/((!?)\[(.*?)\]\((.*?)( ".*")?\)|\\([\\`*_{}\[\]()#+\-.!~]))/g,((e,n,i,o,a,c,m)=>(p[--h]=a?i?'<img src="'+a+'" alt="'+o+'"/>':'<a href="'+a+'">'+u(o).replace(t,"$1")+"</a>":m,h+""))),l(/&lt;(.*?)&gt;/g,((e,n)=>'<a href="'+n+'">'+u(n).replace(t,"$1")+"</a>")),l(/\n(( *\|.*?\| *\n)+)/g,((e,n)=>{var i=n.match(a)[1];return"\n"+d("table",n.replace(c,((e,n)=>e==i?"":d("tr",e.replace(m,((e,o,a)=>a?d(i&&!n?"th":"td",u(o||"").replace(t,"$1")):""))))))})),l(/(?=^|>|\n)([>\s]*?)(#{1,6}) (.*?)( #*)? *(?=\n|$)/g,((e,n,i,o)=>n+d("h"+i.length,u(o).replace(t,"$1")))),l(/(?=^|>|\n)\s*\n+([^<]+?)\n+\s*(?=\n|<|$)/g,((e,n)=>d("p",u(n).replace(t,"$1")))),l(/-\d+\uf8ff/g,(e=>p[parseInt(e,10)])),e.trim()},f=e=>{let t=t=>e.next(t),n=t=>e.throw(t);return new Promise(((i,o)=>{let a=e=>{e.done?i(e.value):Promise.resolve(e.value).then(t,n).then(a,o)};a(e.next())}))};let g;const m=document.getElementById("comments-issue-id").innerText,n=new URL(window.location.href);let q,p=n.searchParams.get("github_access_token");p&&(document.cookie=`github_access_token=${p};Path=/;Secure;SameSite=Strict`,n.searchParams.delete("github_access_token"),window.location.replace(n)),null!=p||(p=null==(q=document.cookie.split(";").find((e=>e.trim().startsWith("github_access_token="))))?void 0:q.trim().substring(20));const r=()=>{document.cookie="github_access_token=;expires=Thu, 01 Jan 1970 00:00:00 GMT;Path=/;Secure;SameSite=Strict",p=null},t=()=>f(function*(){var e;let n;if(g=JSON.parse(null!=(n=null==(e=document.getElementById("comments-addition"))?void 0:e.innerText)?n:"[]"),p){if(200!==(e=yield fetch(`https://comments.fullstackjam.com/comments?issue_id=${m}&github_access_token=${p}`,{method:"GET"})).status)return r(),yield t()}else e=yield fetch(`https://comments.fullstackjam.com/comments?issue_id=${m}`,{method:"GET"});200===e.status&&(g=g.concat(yield e.json()))}()),u=()=>{g.sort(((e,t)=>new Date(e.created_at).getTime()-new Date(t.created_at).getTime()));let e=document.getElementById("comment-list");e.innerHTML="";var t=document.createElement("div");for(t.id="comment-header",t.innerText="Comments",e.appendChild(t),0===g.length&&((t=document.createElement("div")).id="comment-tip",t.innerText="No comment yet",e.appendChild(t)),t=0;t<g.length;t++){let o=document.createElement("li");var n=document.createElement("div");n.id="comment-info";var i=document.createElement("img");i.id="comment-avatar",i.src=g[t].user.avatar_url,n.appendChild(i),(i=document.createElement("a")).id="comment-author",i.innerText=g[t].user.login,g[t].user.html_url&&(i.href=g[t].user.html_url),n.appendChild(i),(i=document.createElement("div")).id="comment-datetime",i.innerText=new Date(g[t].created_at).toLocaleString(),n.appendChild(i),o.appendChild(n),(n=document.createElement("div")).id="comment-body",n.innerHTML=y(g[t].body),o.appendChild(n),e.appendChild(o)}},v=()=>f(function*(){let e=document.getElementById("comment-action");e.innerHTML="";var n=document.createElement("div");if(n.id="comment-header",n.innerText="Leave a comment",e.appendChild(n),p){if(200===(n=yield fetch(`https://comments.fullstackjam.com/userinfo?github_access_token=${p}`,{method:"GET"})).status){n=yield n.json();let o=document.createElement("div");o.id="comment-action-info";var i=document.createElement("img");i.id="comment-action-avatar",i.src=n.avatar_url,o.appendChild(i),(i=document.createElement("a")).id="comment-action-author",i.innerText=n.login,i.href=n.html_url,o.appendChild(i);let a=document.createElement("button");a.id="comment-action-logout",a.innerText="Logout",a.addEventListener("click",(()=>{r(),v()})),o.appendChild(a),e.appendChild(o),(n=document.createElement("div")).id="comment-tip",n.innerText="Before posting a comment, consider if it's relevant, sensible, and kind. Would it bother you if someone else wrote it?",e.appendChild(n),(n=document.createElement("div")).id="comment-action-input";let c=document.createElement("textarea");c.id="comment-action-textarea",c.placeholder="Leave a comment",n.appendChild(c);let l=document.createElement("button");return l.id="comment-action-post",l.innerText="Comment",l.addEventListener("click",(()=>f(function*(){a.disabled=!0,c.disabled=!0,l.disabled=!0;let e=c.value.trim();0!==e.length&&(201===(yield fetch(`https://comments.fullstackjam.com/comments?issue_id=${m}&github_access_token=${p}`,{method:"POST",body:JSON.stringify({body:e})})).status?t().then((()=>u())).then((()=>v())):(r(),yield v(),window.alert("Failed to post comment")))}()))),n.appendChild(l),void e.appendChild(n)}r()}(n=document.createElement("div")).id="comment-tip",n.innerText="Clicking the login button means you agree to use cookies to store your GitHub Access Token",e.appendChild(n),(n=document.createElement("button")).id="comment-action-login",n.innerText="Login with GitHub",n.addEventListener("click",(()=>window.location.replace(`https://comments.fullstackjam.com/login?redirect_uri=${window.location.href}`))),e.appendChild(n)}());t().then((()=>u())).then((()=>v()))</script></div>